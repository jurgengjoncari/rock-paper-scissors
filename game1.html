<!DOCTYPE html>
<html>
    <head></head>
    <body>
        <script>
            Shapes = ["rock", "paper", "scissors"]
            playerScore = 0;
            computerScore = 0;

            function playRound(playerSelection, computerSelection) {
                if (playerSelection == computerSelection) {
                    wins = "nobody";
                } else {
                    if (areEqualSets(
                        new Set(playerSelection, computerSelection), 
                        new Set("rock", "paper"))) {
                        wins = whoeverHas("paper")
                    }
                    else if (areEqualSets(
                        new Set(playerSelection, computerSelection), 
                        new Set("paper", "scissors"))) {
                        wins = whoeverHas("scissors")
                    }
                    else if (areEqualSets(
                        new Set(playerSelection, computerSelection), 
                        new Set("scissors", "rock"))) {
                        wins = whoeverHas("rock")
                    }
                }
                return wins
            }
            function game() {
                for (i = 0; i < 5; i++) {
                    playerSelection = chooses();
                    computerSelection = computerPlay();
                    playRound(playerSelection, computerSelection);
                    console.log(playRound(playerSelection, computerSelection))
                    if (wins != "nobody") {
                        if (wins == "player") {playerScore++}
                        else {computerScore++}
                    }
                }
                if (playerScore != computerScore) {
                    if (playerScore > computerScore) {
                        return "player wins"
                    } else {
                        return "computer wins"
                    }
                } else {
                    return "it's a draw"
                }
            }

            function chooses() {return shape = prompt("Choose a shape: ")}
            function computerPlay() {return Shapes[Math.floor(Math.random() * 3)]}
            function whoeverHas(something) {
                if (playerSelection == something) {return "player"}
                else if (computerSelection == something) {return "computer"}
            }
            function areEqualSets(A, B) {
                if (A.size !== B.size) return false;
                for (element of A) if (!B.has(element)) return false;
                return true;
            }
        </script>
    </body>
</html>
